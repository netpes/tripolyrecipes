import Head from 'next/head'
import Alert from '@mui/material/Alert';
import axios from "axios";
import {useEffect, useState} from "react";
import BasicCard from "./card";
import SearchAppBar from "./appbar";
import AppBarQ from './Bar';
import TextField from '@mui/material/TextField';




export default function Home() {
    const [title,setTitle] = useState()
    const [data,setData] = useState()
    const [check,setCheck] = useState(true)
   
        async function Ax(){
            const res = await axios.post("../api/addrecipe/", {title,data});
            console.log(res)
            if (res.data.success){
                setCheck(true)
                window.location.href = "./"
            } else {
                setCheck(false)
            }

         
        }

function ToData(e){
    setData(e.target.value.replace(/\n/g, '<br/>'))
}


  return (
    <>
      <Head>
        <title>Recipes</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
          <script src="https://cdn.tailwindcss.com"></script>
      </Head>
    <AppBarQ/>

     <div className={"er mt-[200px] flex flex-col flex-warp justify-center items-center p-15" }>
        {!check && <Alert sx={{position:"fixed",bottom:0}} variant="filled" severity="error">
                Error, not Saved
              </Alert>}
    
     <TextField
     onChange={e=>setTitle(e.target.value)}
          id="outlined-multiline-flexible"
          label="Title"
          multiline
          maxRows={1}
        />
          <TextField sx={{marginTop:4, width:"50%"}}
          id="outlined-multiline-static"
          label="Recipe"
          multiline
          rows={4}
         value={data}
          onChange={ToData}
        />
  
     <button onClick={Ax}>Submit</button>
     </div>
    </>)
}


